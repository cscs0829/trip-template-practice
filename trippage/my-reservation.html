<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>내 예약 - 트립페이지</title>
	<link rel="icon" type="image/png" href="img/icon/bavel.png">

	<!-- Meta Description -->
	<meta name="description" content="트립페이지 - 내 예약 확인 및 관리">
	<meta name="keywords" content="여행, 여행상품, 여행사, 여행정보, 예약확인">
	<meta name="robots" content="index, nofollow">
	<meta name="web_author" content="트립페이지">
	<meta name="language" content="Korean">  

	<!-- Import Icon -->
  	<link rel="stylesheet" type="text/css" href="css/ionicons.min.css">

	<!-- Import Style -->
	<link rel="stylesheet" type="text/css" href="css/main.css">
    <link rel="stylesheet" type="text/css" href="css/swiper.css">
    <link rel="stylesheet" type="text/css" href="css/checkout.css">
    <link rel="stylesheet" type="text/css" href="css/reservation.css">
    <link rel="stylesheet" type="text/css" href="css/my-reservation.css">
    

</head>
<body style="background: #e6eaed;">

<!-- Reusable Navbar -->
<script type="text/javascript" src="js/navbar.js"></script>
<script>renderNavbar('my-reservation');</script>

<!-- Sidebar -->
<div class="sidebar">
<ul class="sidebar-list">
	<li><a href="" class="close"><span class="ion-android-close"></span></a></li>
	<li class="sidebar-list-hover"><a href="index.html">홈</a></li>
    <li class="sidebar-list-hover"><a href="destination.html">여행지</a></li>
    <li class="sidebar-list-hover"><a href="gallery.html">갤러리</a></li>
    <li class="sidebar-list-hover"><a href="index.html#discover">상품소개</a></li>
    <li class="sidebar-list-hover"><a href="board.html">게시판</a></li>
    <li><a class="btn btn-orange btn-round" href="login.html">로그인</a></li>
</ul>                    
</div>

<!-- Sidebar Overlay -->
<section class="sidebar-overlay"></section>

<!-- Login Form -->
<div class="login-form">
	<div class="login-top">
		<span class="close">&times;</span>
	</div>
	<div class="login">
		<h3 class="text-center">
			트립페이지 로그인
		</h3>
		<div class="form-input">
			<label>이메일</label> <br>
			<input type="email" name="" class="form-control">
		</div>
		<div class="form-input">
			<label>비밀번호</label> <br>
			<input type="password" name="" class="form-control">
		</div>
		<div class="form-input">
			<button type="submit" class="btn btn-login">로그인</button>
		</div>
		<a href="" class="text-center">계정이 없으신가요? 회원가입하기</a>
	</div>
</div>

<div class="login-overlay"></div>

<!-- Section -->
<section class="section-ticket">
    <div class="reservation-container">
        
        <div class="reservation-header">
            <h1>🎫 내 예약</h1>
            <p>예약한 여행 상품을 확인하고 관리하세요</p>
        </div>
        
        <!-- 예약 정보가 있을 때 -->
        <div id="reservationContent" style="display: none;">
            <div class="reservation-card">
                <div class="reservation-header-section">
                    <div class="reservation-status" id="reservationStatus">예약 완료</div>
                    <h2 class="reservation-title" id="productTitle">코끼리 사파리 공원</h2>
                    <p class="reservation-id" id="orderId">주문번호: DEMO_20250115_143022_abc123</p>
                </div>
                
                <div class="reservation-body">
                    <div class="reservation-info-grid">
                        <div class="info-item">
                            <div class="info-icon">📅</div>
                            <div class="info-content">
                                <h4>여행 날짜</h4>
                                <p id="travelDate">2025-01-15</p>
                            </div>
                        </div>
                        
                        <div class="info-item">
                            <div class="info-icon">👥</div>
                            <div class="info-content">
                                <h4>인원 수</h4>
                                <p id="paxCount">2명</p>
                            </div>
                        </div>
                        
                        <div class="info-item">
                            <div class="info-icon">💰</div>
                            <div class="info-content">
                                <h4>결제 금액</h4>
                                <p id="totalAmount">₩ 240,000</p>
                            </div>
                        </div>
                        
                        <div class="info-item">
                            <div class="info-icon">💳</div>
                            <div class="info-content">
                                <h4>결제 수단</h4>
                                <p id="paymentMethod">카드</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="reservation-details">
                        <h3 class="details-title">상세 정보</h3>
                        <ul class="details-list">
                            <li>
                                <span>출발 시간</span>
                                <span>08:00</span>
                            </li>
                            <li>
                                <span>도착 시간</span>
                                <span>16:00</span>
                            </li>
                            <li>
                                <span>포함 사항</span>
                                <span>교통편, 아침식사, 입장료, 보험</span>
                            </li>
                            <li>
                                <span>집결 장소</span>
                                <span>발리 공항 또는 호텔 픽업</span>
                            </li>
                            <li>
                                <span>예약 일시</span>
                                <span id="reservationDate">2025-01-15 14:30</span>
                            </li>
                        </ul>
                    </div>
                    
                    <div class="qr-code-section">
                        <div class="qr-code">🎫</div>
                        <p class="qr-text">여행 당일 이 QR 코드를 보여주세요</p>
                    </div>
                    
                    <div class="reservation-actions">
                        <button class="action-button btn-primary" onclick="downloadTicket()">
                            <i class="ion-document"></i> 티켓 다운로드
                        </button>
                        <button class="action-button btn-secondary" onclick="modifyReservation()">
                            <i class="ion-edit"></i> 예약 수정
                        </button>
                        <button class="action-button btn-success" onclick="contactSupport()">
                            <i class="ion-chatbubble"></i> 문의하기
                        </button>
                        <button class="action-button btn-danger" onclick="cancelReservation()">
                            <i class="ion-close-circled"></i> 예약 취소
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 예약 정보가 없을 때 -->
        <div id="noReservationContent" class="no-reservation">
            <i class="ion-ios-paper-outline"></i>
            <h3>예약 정보가 없습니다</h3>
            <p>아직 예약한 여행 상품이 없습니다.<br>
            다양한 여행 상품을 둘러보고 예약해보세요!</p>
            <a href="index.html" class="btn-home">여행 상품 둘러보기</a>
        </div>
    </div>
</section>

<!-- Footer (reusable) -->
<script type="text/javascript" src="js/footer.js"></script>
<script>renderFooter();</script>

    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/main.js"></script>
    <script type="text/javascript" src="js/jquery.swipebox.min.js"></script>
    
    <script>
        // URL 파라미터에서 예약 정보 가져오기
        function getUrlParameter(name) {
            name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
            var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
            var results = regex.exec(location.search);
            return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
        }
        
        // 예약 정보 표시 함수
        function displayReservation() {
            const orderId = getUrlParameter('orderId');
            const orderName = getUrlParameter('orderName');
            const method = getUrlParameter('method');
            const amount = getUrlParameter('amount');
            const paymentKey = getUrlParameter('paymentKey');
            
            // URL 파라미터가 있으면 예약 정보 표시
            if (orderId && orderName) {
                document.getElementById('reservationContent').style.display = 'block';
                document.getElementById('noReservationContent').style.display = 'none';
                
                // 예약 정보 업데이트
                document.getElementById('orderId').textContent = `주문번호: ${orderId}`;
                document.getElementById('productTitle').textContent = orderName;
                document.getElementById('paymentMethod').textContent = method || '카드';
                document.getElementById('totalAmount').textContent = `₩ ${parseInt(amount).toLocaleString()}`;
                
                // 현재 시간을 예약 시간으로 설정
                const now = new Date();
                const reservationTime = now.toLocaleString('ko-KR');
                document.getElementById('reservationDate').textContent = reservationTime;
                
                console.log('예약 정보 표시:', { orderId, orderName, method, amount, paymentKey });
            } else {
                // URL 파라미터가 없으면 예약 없음 표시
                document.getElementById('reservationContent').style.display = 'none';
                document.getElementById('noReservationContent').style.display = 'block';
            }
        }
        
        // 티켓 다운로드 함수
        function downloadTicket() {
            showInfoToast('티켓 다운로드 기능은 준비 중입니다.');
        }
        
        // 예약 수정 함수
        function modifyReservation() {
            showInfoToast('예약 수정 기능은 준비 중입니다.');
        }
        
        // 문의하기 함수
        function contactSupport() {
            showInfoToast('고객센터: 02-1234-5678\n이메일: contact@trippage.co.kr');
        }
        
        // 예약 취소 함수
        function cancelReservation() {
            if (confirm('정말로 예약을 취소하시겠습니까?\n취소 시 환불 규정이 적용됩니다.')) {
                showSuccessToast('예약이 취소되었습니다. 환불은 3-5일 내에 처리됩니다.');
                // 홈페이지로 이동
                window.location.href = 'index.html';
            }
        }
        
        // 페이지 로드 시 예약 정보 표시
        document.addEventListener('DOMContentLoaded', function() {
            displayReservation();
            
            // 사이드바 이벤트 리스너
            $('.sidebar-toggle').off('click').on('click', function(e) {
                e.preventDefault();
                $('.sidebar').addClass('active');
                $('.sidebar-overlay').css('visibility', 'visible');
            });
            
            $('.sidebar-overlay, .close').off('click').on('click', function(e) {
                e.preventDefault();
                $('.sidebar').removeClass('active');
                $('.sidebar-overlay').css('visibility', 'hidden');
            });
        });
        
        // 스크롤 이벤트로 navbar 스타일 변경
        window.addEventListener('scroll', function() {
            const navbar = document.querySelector('.navbar');
            const scrollPosition = window.scrollY;
            
            if (scrollPosition > 50) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        });
    </script>
</body>
</html>
