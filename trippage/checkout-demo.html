<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>ì£¼ë¬¸ì„œ (ë°ëª¨) - íŠ¸ë¦½í˜ì´ì§€</title>
	<link rel="icon" type="image/png" href="img/icon/bavel.png">

	<!-- Meta Description -->
	<meta name="description" content="íŠ¸ë¦½í˜ì´ì§€ - ì—¬í–‰ ìƒí’ˆ íŒë§¤ ë° ì—¬í–‰ ì •ë³´ ì œê³µ">
	<meta name="keywords" content="ì—¬í–‰, ì—¬í–‰ìƒí’ˆ, ì—¬í–‰ì‚¬, ì—¬í–‰ì •ë³´, ì—¬í–‰ê°€ì´ë“œ">
	<meta name="robots" content="index, nofollow">
	<meta name="web_author" content="íŠ¸ë¦½í˜ì´ì§€">
	<meta name="language" content="Korean">  

	<!-- Import Icon -->
  	<link rel="stylesheet" type="text/css" href="css/ionicons.min.css">

	<!-- Import Style -->
	<link rel="stylesheet" type="text/css" href="css/main.css">
    <link rel="stylesheet" type="text/css" href="css/swiper.css">
    <link rel="stylesheet" type="text/css" href="css/checkout.css">
    
    <!-- Toss Payments SDK -->
    <script src="https://js.tosspayments.com/v2/standard"></script>
</head>
<body style="background: #e6eaed;">

<!-- Reusable Navbar -->
<script type="text/javascript" src="js/navbar.js"></script>
<script>renderNavbar('checkout-demo');</script>

<!-- Sidebar -->
<div class="sidebar">
<ul class="sidebar-list">
	<li><a href="" class="close"><span class="ion-android-close"></span></a></li>
	<li class="sidebar-list-hover"><a href="index.html">í™ˆ</a></li>
    <li class="sidebar-list-hover"><a href="destination.html">ì—¬í–‰ì§€</a></li>
    <li class="sidebar-list-hover"><a href="gallery.html">ê°¤ëŸ¬ë¦¬</a></li>
    <li class="sidebar-list-hover"><a href="index.html#discover">ìƒí’ˆì†Œê°œ</a></li>
    <li class="sidebar-list-hover"><a href="board.html">ê²Œì‹œíŒ</a></li>
    <li><a class="btn btn-orange btn-round" href="login.html">ë¡œê·¸ì¸</a></li>
</ul>                    
</div>

<!-- Sidebar Overlay -->
<section class="sidebar-overlay"></section>

<!-- Login Form -->
<div class="login-form">
	<div class="login-top">
		<span class="close">&times;</span>
	</div>
	<div class="login">
		<h3 class="text-center">
			íŠ¸ë¦½í˜ì´ì§€ ë¡œê·¸ì¸
		</h3>
		<div class="form-input">
			<label>ì´ë©”ì¼</label> <br>
			<input type="email" name="" class="form-control">
		</div>
		<div class="form-input">
			<label>ë¹„ë°€ë²ˆí˜¸</label> <br>
			<input type="password" name="" class="form-control">
		</div>
		<div class="form-input">
			<button type="submit" class="btn btn-login">ë¡œê·¸ì¸</button>
		</div>
		<a href="" class="text-center">ê³„ì •ì´ ì—†ìœ¼ì‹ ê°€ìš”? íšŒì›ê°€ì…í•˜ê¸°</a>
	</div>
</div>

<div class="login-overlay"></div>

<!-- Section -->
<section class="section-ticket">
    <div class="checkout-container">
        <div class="demo-notice">
            <h4>ğŸš§ ë°ëª¨ í˜ì´ì§€ ì•ˆë‚´</h4>
            <p>ì´ í˜ì´ì§€ëŠ” í† ìŠ¤í˜ì´ë¨¼ì¸  ê²°ì œìœ„ì ¯ ì—°ë™ ë°ëª¨ì…ë‹ˆë‹¤.<br>
            ì‹¤ì œ ê²°ì œê°€ ì´ë£¨ì–´ì§€ì§€ ì•Šìœ¼ë©°, ì‹¤ì œ ì„œë¹„ìŠ¤ì—ì„œëŠ” ë³¸ì¸ì˜ API í‚¤ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.</p>
        </div>
        
        <div class="checkout-header">
            <h2>ì£¼ë¬¸ì„œ (ë°ëª¨)</h2>
        </div>
    
    <!-- Order Summary -->
    <div class="order-summary">
        <h3>ì£¼ë¬¸ ìƒí’ˆ</h3>
        <div class="order-item">
            <img src="img/elephant.jpg" alt="ì½”ë¼ë¦¬ ì‚¬íŒŒë¦¬ ê³µì›">
            <div class="order-details">
                <h4 id="productName">ì½”ë¼ë¦¬ ì‚¬íŒŒë¦¬ ê³µì›</h4>
                <p id="travelDate">ì—¬í–‰ ë‚ ì§œ: 2025-01-15</p>
                <p id="paxCount">ì¸ì› ìˆ˜: 2ëª…</p>
                <p>ì‹œê°„: 08:00 - 16:00</p>
                <p>í¬í•¨ì‚¬í•­: êµí†µí¸, ì•„ì¹¨ì‹ì‚¬, ì…ì¥ë£Œ, ë³´í—˜</p>
            </div>
        </div>
        
        <div class="price-summary">
            <div class="price-row">
                <span>ìƒí’ˆ ê°€ê²©</span>
                <span id="basePrice">â‚© 120,000</span>
            </div>
            <div class="price-row">
                <span>ì¸ì› ìˆ˜</span>
                <span id="paxDisplay">2ëª…</span>
            </div>
            <div class="price-row total">
                <span>ì´ ê²°ì œ ê¸ˆì•¡</span>
                <span id="totalPrice">â‚© 240,000</span>
            </div>
        </div>
    </div>
    
    <!-- Payment Button Section -->
    <div class="payment-section">
        <div class="loading" id="paymentLoading">
            <div class="loading-spinner"></div>
            <p>ê²°ì œ ì²˜ë¦¬ ì¤‘ì…ë‹ˆë‹¤...</p>
        </div>
        <button type="button" class="payment-button" id="paymentButton">
            ê²°ì œí•˜ê¸° (ë°ëª¨)
        </button>
    </div>
    </div>
</section>

<!-- ê²°ì œ ëª¨ë‹¬ -->
<div id="paymentModal" class="payment-modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 class="modal-title">ê²°ì œ ìˆ˜ë‹¨ ì„ íƒ</h3>
            <button class="modal-close" id="modalClose">&times;</button>
        </div>
        <div class="modal-body">
            <div class="payment-method-item selected" data-method="card">
                <div class="payment-method-info">
                    <div class="payment-method-icon">ğŸ’³</div>
                    <div class="payment-method-text">
                        <h4>ì¹´ë“œ</h4>
                        <p>ì‹ ìš©ì¹´ë“œ, ì²´í¬ì¹´ë“œ</p>
                    </div>
                </div>
                <div class="payment-method-radio"></div>
            </div>
            
            <div class="payment-method-item" data-method="transfer">
                <div class="payment-method-info">
                    <div class="payment-method-icon">ğŸ¦</div>
                    <div class="payment-method-text">
                        <h4>ê³„ì¢Œì´ì²´</h4>
                        <p>ì‹¤ì‹œê°„ ê³„ì¢Œì´ì²´</p>
                    </div>
                </div>
                <div class="payment-method-radio"></div>
            </div>
            
            <div class="payment-method-item" data-method="phone">
                <div class="payment-method-info">
                    <div class="payment-method-icon">ğŸ“±</div>
                    <div class="payment-method-text">
                        <h4>íœ´ëŒ€í°</h4>
                        <p>íœ´ëŒ€í° ì†Œì•¡ê²°ì œ</p>
                    </div>
                </div>
                <div class="payment-method-radio"></div>
            </div>
            
            <div class="payment-method-item" data-method="kakaopay">
                <div class="payment-method-info">
                    <div class="payment-method-icon">ğŸ’›</div>
                    <div class="payment-method-text">
                        <h4>ì¹´ì¹´ì˜¤í˜ì´</h4>
                        <p>ê°„í¸ê²°ì œ</p>
                    </div>
                </div>
                <div class="payment-method-radio"></div>
            </div>
            
            <div class="payment-method-item" data-method="naverpay">
                <div class="payment-method-info">
                    <div class="payment-method-icon">ğŸ’š</div>
                    <div class="payment-method-text">
                        <h4>ë„¤ì´ë²„í˜ì´</h4>
                        <p>ê°„í¸ê²°ì œ</p>
                    </div>
                </div>
                <div class="payment-method-radio"></div>
            </div>
            
            <div class="payment-method-item" data-method="tosspay">
                <div class="payment-method-info">
                    <div class="payment-method-icon">ğŸ”µ</div>
                    <div class="payment-method-text">
                        <h4>í† ìŠ¤í˜ì´</h4>
                        <p>ê°„í¸ê²°ì œ</p>
                    </div>
                </div>
                <div class="payment-method-radio"></div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="modal-pay-button" id="modalPayButton">
                <span id="selectedMethodName">ì¹´ë“œ</span>ë¡œ â‚© <span id="modalAmount">240,000</span> ê²°ì œí•˜ê¸°
            </button>
        </div>
    </div>
</div>

<!-- Footer (reusable) -->
<script type="text/javascript" src="js/footer.js"></script>
<script>renderFooter();</script>

    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/main.js"></script>
    <script type="text/javascript" src="js/jquery.swipebox.min.js"></script>
    
    <script>
        // ê³ ì •ëœ ë°ëª¨ ë°ì´í„°
        const totalAmount = 240000;
        
        // í† ìŠ¤í˜ì´ë¨¼ì¸  ê³µì‹ í…ŒìŠ¤íŠ¸ í´ë¼ì´ì–¸íŠ¸ í‚¤ (í† ìŠ¤í˜ì´ë¨¼ì¸  ê³µì‹ ë¬¸ì„œì—ì„œ ì œê³µ)
        const clientKey = 'test_ck_DnyRpQWGrNzjqXtj8k2rKWzZzlNLxRnkqAOxJVdNhZmY2cEoZmKLvgD4JZnk';
        
        // ê²°ì œìœ„ì ¯ ì´ˆê¸°í™”
        let paymentWidget;
        let tossPayments;
        
        // DOMì´ ë¡œë“œëœ í›„ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('DOM ë¡œë“œ ì™„ë£Œ, ê²°ì œ ì‹œìŠ¤í…œ ì´ˆê¸°í™”');
            
            // ëª¨ë‹¬ ê¸ˆì•¡ í‘œì‹œ ì—…ë°ì´íŠ¸
            document.getElementById('modalAmount').textContent = totalAmount.toLocaleString();
            
            // ëª¨ë‹¬ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
            initializeModal();
            
            // ì‹¤ì œ í† ìŠ¤í˜ì´ë¨¼ì¸  ì—°ë™ ì‹œë„ (ì˜µì…˜)
            try {
                if (typeof TossPayments !== 'undefined') {
                    tossPayments = TossPayments(clientKey);
                    paymentWidget = tossPayments.widgets({
                        customerKey: generateRandomString(),
                    });
                    
                    await paymentWidget.setAmount({
                        currency: 'KRW',
                        value: totalAmount,
                    });
                    
                    console.log('ì‹¤ì œ ê²°ì œìœ„ì ¯ë„ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤.');
                }
            } catch (error) {
                console.log('ì‹¤ì œ ê²°ì œìœ„ì ¯ì€ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì‹œë®¬ë ˆì´ì…˜ ëª¨ë“œë¡œ ì‘ë™í•©ë‹ˆë‹¤.');
            }
            
            console.log('ê²°ì œ ì‹œìŠ¤í…œì´ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤.');
        });
        
        // ëª¨ë‹¬ ì´ˆê¸°í™” í•¨ìˆ˜
        function initializeModal() {
            const modal = document.getElementById('paymentModal');
            const modalClose = document.getElementById('modalClose');
            const paymentMethodItems = document.querySelectorAll('.payment-method-item');
            const selectedMethodName = document.getElementById('selectedMethodName');
            const modalPayButton = document.getElementById('modalPayButton');
            
            // ê²°ì œ ìˆ˜ë‹¨ ì„ íƒ ì´ë²¤íŠ¸
            paymentMethodItems.forEach(item => {
                item.addEventListener('click', function() {
                    // ëª¨ë“  í•­ëª©ì—ì„œ selected í´ë˜ìŠ¤ ì œê±°
                    paymentMethodItems.forEach(i => i.classList.remove('selected'));
                    
                    // ì„ íƒëœ í•­ëª©ì— selected í´ë˜ìŠ¤ ì¶”ê°€
                    this.classList.add('selected');
                    
                    // ì„ íƒëœ ê²°ì œ ìˆ˜ë‹¨ ì—…ë°ì´íŠ¸
                    selectedPaymentMethod = this.dataset.method;
                    const methodName = this.querySelector('h4').textContent;
                    selectedMethodName.textContent = methodName;
                    
                    console.log('ì„ íƒëœ ê²°ì œìˆ˜ë‹¨:', selectedPaymentMethod, methodName);
                });
            });
            
            // ëª¨ë‹¬ ë‹«ê¸° ì´ë²¤íŠ¸
            modalClose.addEventListener('click', closeModal);
            
            // ëª¨ë‹¬ ë°°ê²½ í´ë¦­ ì‹œ ë‹«ê¸°
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    closeModal();
                }
            });
            
            // ESC í‚¤ë¡œ ëª¨ë‹¬ ë‹«ê¸°
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && modal.classList.contains('show')) {
                    closeModal();
                }
            });
            
            // ëª¨ë‹¬ ë‚´ ê²°ì œí•˜ê¸° ë²„íŠ¼
            modalPayButton.addEventListener('click', function() {
                closeModal();
                processPayment();
            });
        }
        
        // ëª¨ë‹¬ ì—´ê¸° í•¨ìˆ˜
        function openModal() {
            const modal = document.getElementById('paymentModal');
            modal.classList.add('show');
            document.body.style.overflow = 'hidden'; // ìŠ¤í¬ë¡¤ ë°©ì§€
        }
        
        // ëª¨ë‹¬ ë‹«ê¸° í•¨ìˆ˜
        function closeModal() {
            const modal = document.getElementById('paymentModal');
            modal.classList.remove('show');
            document.body.style.overflow = ''; // ìŠ¤í¬ë¡¤ ë³µì›
        }
        
        // ëœë¤ ë¬¸ìì—´ ìƒì„± í•¨ìˆ˜
        function generateRandomString() {
            return Math.random().toString(36).substring(2, 15);
        }
        
        // ì£¼ë¬¸ ID ìƒì„± í•¨ìˆ˜
        function generateOrderId() {
            const date = new Date();
            const dateString = date.getFullYear().toString() + 
                             (date.getMonth() + 1).toString().padStart(2, '0') + 
                             date.getDate().toString().padStart(2, '0');
            const timeString = date.getHours().toString().padStart(2, '0') + 
                             date.getMinutes().toString().padStart(2, '0') + 
                             date.getSeconds().toString().padStart(2, '0');
            const randomString = Math.random().toString(36).substring(2, 8);
            return `DEMO_${dateString}_${timeString}_${randomString}`;
        }
        
        // ì„ íƒëœ ê²°ì œ ìˆ˜ë‹¨
        let selectedPaymentMethod = 'card';
        
        // ê²°ì œí•˜ê¸° ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ (ëª¨ë‹¬ ì—´ê¸°)
        document.getElementById('paymentButton').addEventListener('click', function() {
            console.log('ê²°ì œí•˜ê¸° ë²„íŠ¼ í´ë¦­ - ëª¨ë‹¬ ì—´ê¸°');
            openModal();
        });
        
        // ê²°ì œ ìˆ˜ë‹¨ë³„ ì´ë¦„ ë§¤í•‘
        const paymentMethodNames = {
            'card': 'ì¹´ë“œ',
            'transfer': 'ê³„ì¢Œì´ì²´',
            'phone': 'íœ´ëŒ€í°',
            'kakaopay': 'ì¹´ì¹´ì˜¤í˜ì´',
            'naverpay': 'ë„¤ì´ë²„í˜ì´',
            'tosspay': 'í† ìŠ¤í˜ì´'
        };
        
        // ì‹¤ì œ ê²°ì œ ì²˜ë¦¬ í•¨ìˆ˜
        async function processPayment() {
            // ë¡œë”© í‘œì‹œ
            document.getElementById('paymentLoading').style.display = 'block';
            document.getElementById('paymentButton').disabled = true;
            
            try {
                const orderId = generateOrderId();
                console.log('ê²°ì œ ìš”ì²­ ì‹œì‘, ì£¼ë¬¸ID:', orderId);
                console.log('ì„ íƒëœ ê²°ì œìˆ˜ë‹¨:', selectedPaymentMethod);
                
                // ì‹¤ì œ ê²°ì œìœ„ì ¯ì´ ìˆëŠ” ê²½ìš°
                if (paymentWidget) {
                    await paymentWidget.requestPayment({
                        orderId: orderId,
                        orderName: 'ì½”ë¼ë¦¬ ì‚¬íŒŒë¦¬ ê³µì› (ë°ëª¨)',
                        customerName: 'í™ê¸¸ë™',
                        customerEmail: 'demo@trippage.co.kr',
                        customerMobilePhone: '01012345678',
                        successUrl: `${window.location.origin}/trippage/my-reservation.html?orderId=${orderId}&orderName=${encodeURIComponent('ì½”ë¼ë¦¬ ì‚¬íŒŒë¦¬ ê³µì› (ë°ëª¨)')}&method=${encodeURIComponent(paymentMethodNames[selectedPaymentMethod] || 'ì¹´ë“œ')}&amount=${totalAmount}&paymentKey=test_payment_key_${Date.now()}`,
                        failUrl: `${window.location.origin}/trippage/fail.html`,
                    });
                } else {
                    // ì‹œë®¬ë ˆì´ì…˜ ëª¨ë“œ
                    console.log('ì‹œë®¬ë ˆì´ì…˜ ê²°ì œ ì§„í–‰ ì¤‘...');
                    
                    // 2ì´ˆ í›„ ì˜ˆì•½ í˜ì´ì§€ë¡œ ì´ë™ (ì‹œë®¬ë ˆì´ì…˜)
                    setTimeout(() => {
                        const reservationUrl = `my-reservation.html?orderId=${orderId}&orderName=${encodeURIComponent('ì½”ë¼ë¦¬ ì‚¬íŒŒë¦¬ ê³µì› (ë°ëª¨)')}&method=${encodeURIComponent(paymentMethodNames[selectedPaymentMethod])}&amount=${totalAmount}&paymentKey=test_payment_key_${Date.now()}`;
                        window.location.href = reservationUrl;
                    }, 2000);
                }
                
            } catch (error) {
                console.error('ê²°ì œ ì˜¤ë¥˜:', error);
                showErrorToast(`ê²°ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ${error.message || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜'}`);
                
                // ë¡œë”© ìˆ¨ê¸°ê¸°
                document.getElementById('paymentLoading').style.display = 'none';
                document.getElementById('paymentButton').disabled = false;
            }
        }
        
        // ìŠ¤í¬ë¡¤ ì´ë²¤íŠ¸ë¡œ navbar ìŠ¤íƒ€ì¼ ë³€ê²½
        window.addEventListener('scroll', function() {
            const navbar = document.querySelector('.navbar');
            const scrollPosition = window.scrollY;
            
            if (scrollPosition > 50) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        });
        
        // ì‚¬ì´ë“œë°” ë””ë²„ê¹…
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM ë¡œë“œ ì™„ë£Œ');
            
            // jQuery í™•ì¸
            if (typeof $ !== 'undefined') {
                console.log('jQuery ë¡œë“œë¨');
                
                // ì‚¬ì´ë“œë°” í† ê¸€ ë²„íŠ¼ í™•ì¸
                const sidebarToggle = $('.sidebar-toggle');
                console.log('ì‚¬ì´ë“œë°” í† ê¸€ ë²„íŠ¼:', sidebarToggle.length);
                
                // ìˆ˜ë™ìœ¼ë¡œ ì´ë²¤íŠ¸ ì¶”ê°€ (ë°±ì—…)
                $('.sidebar-toggle').off('click').on('click', function(e) {
                    console.log('ì‚¬ì´ë“œë°” í† ê¸€ í´ë¦­ë¨');
                    e.preventDefault();
                    $('.sidebar').addClass('active');
                    $('.sidebar-overlay').css('visibility', 'visible');
                });
                
                $('.sidebar-overlay, .close').off('click').on('click', function(e) {
                    console.log('ì‚¬ì´ë“œë°” ë‹«ê¸° í´ë¦­ë¨');
                    e.preventDefault();
                    $('.sidebar').removeClass('active');
                    $('.sidebar-overlay').css('visibility', 'hidden');
                });
            } else {
                console.error('jQueryê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤');
            }
        });
    </script>
</body>
</html>
